// вариант №15
#include <iostream>
#include <vector>
#include <stdlib.h>

/*
15. Объявить массив целых чисел и заполнить его случайными значениями с помощью функций srand() и rand(). Размер массива и диапазон значений его элементов вводятся с клавиатуры. Во всех непрерывных подпоследовательностях положительных чисел заменить на 0 значения тех элементов, значения которых меньше среднего для этой подпоследовательности. Рассматриваемые подпоследовательности не должны являться частью большей подобной подпоследовательности.
*/

int main() {
   srand(time(0));
   int n, A, B, sum, i_start, i_end;
   bool is_pos = false;
   sum = i_end = i_start = 0;
   std::vector <int> arr;

   std::cout<< "input size of arr - ";
   std::cin >>n;

   std::cout<< "input frame of arr - ";
   std::cin >> A >> B;

   arr.resize(n);

   for (int i = 0; i < n; ++i) {
      arr[i] = (rand()%(B-A+1)+A);
      std::cout<< arr[i] << " ";
      if (arr[i] > 0) {
         //  это первый положительный сгенерированный элемент последовательности?
         if (!is_pos) {
            i_start = i;
            is_pos = true;
            sum = 0;
         }
         sum += arr[i];
      }
      
      else {
         // первый отрицательный элемент после последовательности положительных элементов?
         if (is_pos) {
            i_end = i;
            is_pos = false;
         }
      }
      
      if (i == n-1)
         i_end = i;

      if (abs(i_start - i_end) > 1 && !is_pos) {
         double med = sum*1.0/(abs(i_start - i_end));

         for (int j = i_start; j < i_end; j++)
            if (arr[j] < med)
               arr[j] = 0;
                  i_end = i_start = 0;
      }

   }
   std::cout << std::endl;

   for (int i = 0; i < n; i++)
      std::cout << arr[i] << " ";

   return 0;
}
